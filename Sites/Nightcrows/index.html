<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Daoshi Store - Packs & TWD</title>
  <link rel="icon" type="image/png" href="https://lh3.googleusercontent.com/d/1lLnjQ3NYt6Bd6WapJ2p0EjzfQJIbB-es">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  
  <!-- 💰 Arquivo de Configuração de Preços -->
  <script src="config-precos.js"></script>
  
  <style>
    :root {
      /* Paleta Universal Roxa/Dourada */
      --purple-dark: #1a0d24;
      --purple-deep: #2d1b3d;
      --purple-medium: #4a2d5a;
      --purple-vibrant: #9933ff;
      --purple-light: #b366ff;
      --magenta: #cc66ff;
      --gold: #ffd700;
      --gold-amber: #ffbf00;
      --yellow: #ffc107;
      
      --primary-color: #9933ff;
      --secondary-color: #2d1b3d;
      --accent-color: #ffd700;
      --gold-color: #ffd700;
      --gold-dark: #ffbf00;
      --text-color: #f5f5f5;
      --gothic-purple: #9933ff;
      --gothic-red: #ffd700;
      --gothic-dark: #1a0d24;
      --panel-bg: rgba(45, 27, 61, 0.92);
      --panel-border: #b366ff;
      --input-bg: rgba(153, 51, 255, 0.2);
      --input-border: #ffd700;
      --button-primary: #9933ff;
      --button-hover: #b366ff;
      --button-active: #cc66ff;
    }
    
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
      transition: none;
      image-rendering: pixelated;
      image-rendering: -moz-crisp-edges;
      image-rendering: crisp-edges;
    }
    
    body {
      background-image: url('https://lh3.googleusercontent.com/d/1ECtr_z7YWp_QugVyvTQBWTiV9d88m5zS');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      font-family: 'Press Start 2P', cursive;
      color: var(--text-color);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      padding: 15px;
      font-size: 10px;
      line-height: 1.6;
    }
    
    body::before { 
      content: ''; 
      position: fixed; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%; 
      background: linear-gradient(135deg, 
        rgba(26, 13, 36, 0.90) 0%,
        rgba(153, 51, 255, 0.3) 30%,
        rgba(179, 102, 255, 0.3) 60%,
        rgba(45, 27, 61, 0.90) 100%
      ); 
      z-index: -1;
    }
    
    body::after {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.25) 0px,
        rgba(0, 0, 0, 0.25) 1px,
        transparent 1px,
        transparent 2px
      );
      pointer-events: none;
      z-index: 9999;
      animation: scanlines 8s linear infinite;
    }
    
    @keyframes scanlines {
      0% { transform: translateY(0); }
      100% { transform: translateY(10px); }
    }
    
    .container { width: 100%; max-width: 1400px; margin: 0 auto; display: flex; flex-direction: column; gap: 15px; flex-grow: 1; }
    
    header { text-align: center; position: relative; flex-shrink: 0; }
    header h1 { 
      font-family: 'Press Start 2P', cursive; 
      font-size: 24px; 
      color: var(--gothic-red); 
      text-shadow: 
        4px 0 0 var(--gothic-purple),
        -4px 0 0 var(--gothic-purple),
        0 4px 0 var(--gothic-purple),
        0 -4px 0 var(--gothic-purple),
        4px 4px 0 var(--gothic-dark),
        -4px -4px 0 var(--gothic-dark),
        4px -4px 0 var(--gothic-dark),
        -4px 4px 0 var(--gothic-dark);
      animation: float 3s ease-in-out infinite, gothic-glow 2s ease-in-out infinite;
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes gothic-glow {
      0%, 100% { 
        filter: drop-shadow(0 0 10px rgba(139, 0, 0, 0.8)) drop-shadow(0 0 20px rgba(25, 25, 112, 0.5));
      }
      50% { 
        filter: drop-shadow(0 0 25px rgba(139, 0, 0, 1)) drop-shadow(0 0 35px rgba(25, 25, 112, 0.8));
      }
    }
    
    header p { 
      color: var(--accent-color); 
      font-weight: 400; 
      font-size: 10px;
      margin-top: 15px;
      text-shadow: 2px 2px 0 var(--gothic-dark);
    }
    
    .cotacao-display { 
      margin-top: 15px; 
      background: var(--gothic-purple); 
      padding: 10px 20px; 
      border-radius: 0; 
      font-size: 10px; 
      border: 4px solid var(--gothic-red); 
      box-shadow: 8px 8px 0 rgba(0,0,0,0.5); 
      display: inline-flex; 
      align-items: center;
    }
    .cotacao-display .icon { 
      margin-right: 10px; 
      color: var(--gothic-red);
      font-size: 16px;
    }
    .cotacao-display .value { 
      font-weight: 600; 
      color: var(--gothic-red);
    }

    .main-layout { display: flex; gap: 20px; flex-grow: 1; }
    .left-column { flex: 2; display: flex; flex-direction: column; min-width: 0; }
    .right-column { flex: 1.2; display: flex; flex-direction: column; min-width: 0; }
    
    .tab-buttons { display: flex; justify-content: center; gap: 15px; flex-shrink: 0; margin-bottom: -12px; }
    .tab-button { 
      padding: 15px 30px; 
      font-family: 'Press Start 2P', cursive; 
      font-size: 12px; 
      font-weight: 400; 
      cursor: pointer; 
      border: 4px solid var(--gothic-red); 
      background: var(--gothic-purple); 
      color: var(--text-color); 
      border-radius: 0; 
      border-bottom: none; 
      position: relative; 
      overflow: hidden;
      box-shadow: 4px 4px 0 rgba(0,0,0,0.5);
    }
    .tab-button.active { 
      background: var(--gothic-red); 
      color: var(--text-color); 
      border-color: var(--gothic-red); 
      transform: translateY(0px); 
      box-shadow: 4px 4px 0 rgba(0,0,0,0.5), 0 0 20px var(--gothic-red);
      animation: pulse-border-gothic 1.5s infinite;
    }
    
    @keyframes pulse-border-gothic {
      0%, 100% { box-shadow: 4px 4px 0 rgba(0,0,0,0.5), 0 0 20px var(--gothic-red); }
      50% { box-shadow: 4px 4px 0 rgba(0,0,0,0.5), 0 0 30px var(--gothic-red); }
    }
    
    .tab-content { flex-grow: 1; }
    .tab-pane { height: 100%; display: none; }
    .tab-pane.active { display: block; }
    
    .panel { 
      background: var(--panel-bg); 
      border-radius: 0; 
      box-shadow: 8px 8px 0 rgba(0,0,0,0.5); 
      border: 4px solid var(--panel-border); 
      backdrop-filter: none; 
      padding: 20px; 
      animation: fadeIn 0.6s ease forwards; 
      height: auto; 
      overflow-y: auto;
      position: relative;
    }
    .tab-content .panel { border-top-left-radius: 0; border-top-right-radius: 0; height: 100%; }
    
    .panel::before {
      content: '🦇';
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px;
      animation: bat-hover 4s ease-in-out infinite;
      filter: drop-shadow(0 0 10px rgba(139, 0, 0, 1)) drop-shadow(0 0 20px rgba(25, 25, 112, 0.6));
    }
    
    .panel::after {
      content: '💀';
      position: absolute;
      bottom: 10px;
      left: 10px;
      font-size: 20px;
      animation: skull-glow 3s ease-in-out infinite;
      filter: drop-shadow(0 0 10px rgba(139, 0, 0, 1)) drop-shadow(0 0 15px rgba(25, 25, 112, 0.8));
    }
    
    @keyframes bat-hover {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }
    
    @keyframes skull-glow {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    
    .panel-header { text-align: center; margin-bottom: 20px; }
    h2 { 
      font-family: 'Press Start 2P', cursive; 
      font-size: 14px; 
      font-weight: 400; 
      text-shadow: 3px 3px 0 rgba(0,0,0,0.5); 
      color: var(--gothic-red);
      display: inline-block;
      position: relative;
      padding: 5px 10px;
      background: var(--gothic-purple);
      border: 3px solid var(--gothic-red);
    }
    h3 { 
      font-family: 'Press Start 2P', cursive; 
      font-size: 11px; 
      font-weight: 400; 
      margin: 15px 0 10px; 
      color: var(--gothic-red); 
      text-align: center; 
      border-bottom: 3px solid var(--panel-border); 
      padding-bottom: 10px;
      text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    
    .form-group { margin-bottom: 15px; }
    label { 
      display: block; 
      margin-bottom: 8px; 
      font-weight: 400; 
      color: var(--accent-color); 
      font-size: 9px;
      text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    input { 
      width: 100%; 
      padding: 10px 12px; 
      background: var(--input-bg); 
      color: var(--text-color); 
      border: 3px solid var(--input-border); 
      border-radius: 0; 
      font-family: 'Press Start 2P', cursive; 
      font-size: 10px; 
      box-shadow: 4px 4px 0 rgba(0,0,0,0.5);
    }
    input:focus { 
      outline: none; 
      border-color: var(--accent-color); 
      box-shadow: 4px 4px 0 rgba(0,0,0,0.5), 0 0 15px var(--accent-color);
    }
    input[type="number"]::-webkit-outer-spin-button, 
    input[type="number"]::-webkit-inner-spin-button { 
      -webkit-appearance: none; 
      appearance: none; 
      margin: 0; 
    }
    input[type="number"] { 
      -moz-appearance: textfield; 
      appearance: textfield;
    }
    
    .pacote-section { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
    .twd-section { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; }
    
    .result-group { 
      margin: 15px 0; 
      padding: 15px; 
      background: rgba(0, 0, 0, 0.5); 
      border-radius: 0; 
      border: 3px solid var(--accent-color);
      box-shadow: 4px 4px 0 rgba(0,0,0,0.5);
    }
    .result-item { 
      display: flex; 
      justify-content: space-between; 
      align-items: center; 
      margin-bottom: 10px; 
      font-size: 9px;
    }
    .result-item:last-child { margin-bottom: 0; }
    .result-label { 
      font-weight: 400;
      color: var(--accent-color);
    }
    .result-value { 
      font-weight: 400; 
      color: var(--gothic-red);
      text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    .result-value small { 
      font-size: 0.8em; 
      opacity: 0.9;
      color: var(--accent-color);
    }
    
    .total-grand { 
      font-size: 11px; 
      font-weight: 400; 
      margin-bottom: 12px; 
      text-align: center; 
      color: var(--gothic-red); 
      text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    .total-grand span { 
      display: block; 
      margin-top: 8px; 
      font-size: 14px;
      color: var(--gothic-red);
      text-shadow: 3px 3px 0 rgba(0,0,0,0.5);
    }
    .total-grand span small { 
      font-size: 0.7em; 
      opacity: 0.9;
      color: var(--accent-color);
    }
    
    .btn { 
      display: inline-flex; 
      align-items: center; 
      justify-content: center; 
      padding: 15px 20px; 
      background: var(--button-primary); 
      color: white; 
      border: 3px solid var(--gothic-red); 
      border-radius: 0; 
      font-family: 'Press Start 2P', cursive; 
      font-size: 10px; 
      font-weight: 400; 
      cursor: pointer; 
      box-shadow: 6px 6px 0 rgba(0,0,0,0.5); 
      width: 100%; 
      margin-top: 10px;
      text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    .btn:hover { 
      background: var(--button-hover); 
      transform: translate(-2px, -2px); 
      box-shadow: 8px 8px 0 rgba(0,0,0,0.5);
    }
    .btn:active { 
      background: var(--button-active); 
      transform: translate(2px, 2px); 
      box-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    .btn svg { width: 14px; height: 14px; margin-right: 10px; }
    
    .payment-methods { display: flex; flex-direction: column; gap: 15px; margin-top: 15px;}
    .payment-method { 
      padding: 15px; 
      background: rgba(0, 0, 0, 0.5); 
      border-radius: 0; 
      border: 3px solid var(--accent-color); 
      position: relative;
      box-shadow: 4px 4px 0 rgba(0,0,0,0.5);
    }
    .payment-method-title { 
      display: flex; 
      align-items: center; 
      font-size: 11px; 
      margin-bottom: 12px; 
      color: var(--gothic-red);
      text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    .payment-method-title span { margin-left: 8px; }
    .payment-details { 
      font-size: 9px;
      line-height: 1.8;
    }
    .payment-details strong { 
      color: var(--accent-color);
      text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    
    .invisible-button { 
      position: absolute; 
      top: 15px; 
      right: 15px; 
      width: 30px; 
      height: 30px; 
      background: transparent; 
      border: none; 
      cursor: pointer; 
      z-index: 10; 
      padding: 0;
      opacity: 0;
    }
    .invisible-button::after { 
      content: "💎"; 
      font-size: 18px; 
      opacity: 0;
    }
    .invisible-button:hover::after { 
      opacity: 0.3;
    }
    
    .tooltip { 
      position: fixed; 
      background: var(--gothic-purple); 
      color: white; 
      padding: 12px 18px; 
      border-radius: 0; 
      font-size: 9px; 
      z-index: 1000; 
      pointer-events: none; 
      opacity: 0; 
      transition: opacity 0.3s; 
      box-shadow: 5px 5px 0 rgba(0,0,0,0.5);
      border: 3px solid var(--gothic-red);
    }
    
    .instruction-block { 
      margin-top: 25px; 
      padding: 15px; 
      background: rgba(0, 0, 0, 0.5); 
      border-radius: 0; 
      border: 3px solid var(--gothic-red);
      box-shadow: 4px 4px 0 rgba(0,0,0,0.5);
    }
    .instruction-block h3 { 
      border-bottom: none; 
      margin-top: 0; 
      margin-bottom: 12px; 
      padding-bottom: 0; 
      color: var(--gothic-red);
    }
    .instruction-block ol { list-style: none; padding-left: 0; counter-reset: instruction-counter; }
    .instruction-block li { 
      position: relative; 
      padding-left: 35px; 
      margin-bottom: 12px; 
      font-size: 9px; 
      line-height: 1.6;
    }
    .instruction-block li::before { 
      counter-increment: instruction-counter; 
      content: counter(instruction-counter); 
      position: absolute; 
      left: 0; 
      top: 0; 
      width: 22px; 
      height: 22px; 
      background: var(--gothic-red); 
      color: var(--text-color); 
      border-radius: 0; 
      font-weight: bold; 
      text-align: center; 
      line-height: 22px; 
      font-size: 10px;
      box-shadow: 2px 2px 0 rgba(0,0,0,0.5);
    }
    .instruction-block a { 
      color: var(--accent-color); 
      font-weight: bold; 
      text-decoration: none;
    }
    .instruction-block a:hover { 
      color: var(--gothic-red); 
      text-decoration: underline;
    }
    
    .sound-control { 
      position: fixed; 
      bottom: 15px; 
      right: 270px; 
      background: var(--gothic-purple); 
      padding: 10px; 
      border-radius: 0; 
      cursor: pointer; 
      z-index: 1000; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      box-shadow: 4px 4px 0 rgba(0,0,0,0.5); 
      border: 3px solid var(--gothic-red);
    }
    .sound-icon { width: 20px; height: 20px; fill: var(--gothic-red); }
    .muted .sound-icon .wave { opacity: 0.3; }
    .muted .sound-icon .line { opacity: 1; }
    .volume-slider { 
      position: fixed; 
      bottom: 15px; 
      right: 330px; 
      background: var(--gothic-purple); 
      padding: 10px 15px; 
      border-radius: 0; 
      z-index: 1000; 
      display: flex; 
      align-items: center; 
      box-shadow: 4px 4px 0 rgba(0,0,0,0.5); 
      border: 3px solid var(--gothic-red); 
      transform: translateX(200px); 
      opacity: 0; 
      transition: transform 0.3s, opacity 0.3s;
    }
    .volume-slider.active { transform: translateX(0); opacity: 1; }
    .volume-slider input { width: 80px; margin: 0 8px; }
    .volume-label { 
      color: var(--gothic-red); 
      font-size: 8px; 
      margin-right: 6px;
    }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    
    .gothic-gif {
      position: fixed;
      bottom: 15px;
      right: 15px;
      width: 240px;
      height: auto;
      z-index: 1000;
      pointer-events: none;
      filter: 
        drop-shadow(0 0 15px rgba(153, 51, 255, 0.8)) 
        drop-shadow(0 0 25px rgba(255, 215, 0, 0.6));
      image-rendering: pixelated;
    }

    @media (max-width: 1200px) {
        .main-layout { flex-direction: column; }
        .right-column { position: static; width: 100%; }
        .panel { height: auto; overflow-y: visible; }
        .tab-content .panel { height: auto; }
    }
    
    @media (max-width: 768px) {
        body { 
          padding: 10px;
          font-size: 9px;
        }
        header h1 { 
          font-size: 16px;
        }
        header p {
          font-size: 8px;
        }
        .tab-button { 
          font-size: 9px; 
          padding: 12px 20px;
        }
        .panel { 
          padding: 15px;
        }
        h2 {
          font-size: 11px;
        }
        h3 {
          font-size: 9px;
        }
        label {
          font-size: 8px;
        }
        .gothic-gif {
          width: 160px;
          bottom: 10px;
          right: 10px;
        }
        .sound-control {
          right: 180px;
        }
        .volume-slider {
          right: 240px;
        }
    }
  </style>
</head>
<body>

  <div class="container">
    <header>
      <h1>🦇 Daoshi Store 🦇</h1>
      <p>💀 Packs & TWD - Nightcrows 💀</p>
      <div class="cotacao-display">
        <span class="icon">💎</span>
        <span id="cotacao">Carregando cotação...</span>
      </div>
    </header>

    <div class="main-layout">
        <div class="left-column">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('topup')">⚔️ Packs Top Up ⚔️</button>
                <button class="tab-button" onclick="showTab('twd')">💀 TWD 💀</button>
            </div>
            <div class="tab-content">
                <div id="topupTab" class="tab-pane active">
                    <div class="panel">
                        <h3>Pacotes de Recarga</h3>
                        <div class="pacote-section">
                            <div class="form-group"><label for="pack-5">$5 Pack</label><input type="number" id="pack-5" value="0" oninput="updateTopUpQuantity(5, this.value)"></div>
                            <div class="form-group"><label for="pack-8">$8 Pack</label><input type="number" id="pack-8" value="0" oninput="updateTopUpQuantity(8, this.value)"></div>
                            <div class="form-group"><label for="pack-10">$10 Pack</label><input type="number" id="pack-10" value="0" oninput="updateTopUpQuantity(10, this.value)"></div>
                            <div class="form-group"><label for="pack-20">$20 Pack</label><input type="number" id="pack-20" value="0" oninput="updateTopUpQuantity(20, this.value)"></div>
                            <div class="form-group"><label for="pack-30">$30 Pack</label><input type="number" id="pack-30" value="0" oninput="updateTopUpQuantity(30, this.value)"></div>
                            <div class="form-group"><label for="pack-50">$50 Pack</label><input type="number" id="pack-50" value="0" oninput="updateTopUpQuantity(50, this.value)"></div>
                            <div class="form-group"><label for="pack-100">$100 Pack</label><input type="number" id="pack-100" value="0" oninput="updateTopUpQuantity(100, this.value)"></div>
                        </div>
                        <h3>Informações da Conta (para Top Up)</h3>
                        <div class="form-group"><label for="login">Login:</label><input type="text" id="login" placeholder="Digite o login"></div>
                        <div class="form-group"><label for="password">Senha:</label><input type="text" id="password" placeholder="Digite a senha"></div>
                        <div class="form-group"><label for="nickname">Nickname:</label><input type="text" id="nickname" placeholder="Digite o nickname"></div>
                        <div class="form-group"><label for="server">Servidor:</label><input type="text" id="server" placeholder="Digite o servidor"></div>
                    </div>
                </div>
                <div id="twdTab" class="tab-pane">
                    <div class="panel">
                        <h3>Pacotes TWD</h3>
                        <div class="twd-section" id="twd-pack-section">
                            </div>
                        <div class="instruction-block">
                            <h3>Como finalizar sua compra:</h3>
                            <ol>
                                <li>Efetue o pagamento de acordo com o resumo do seu pedido à direita.</li>
                                <li>Acesse o <a href="https://webshop.wemade.games/en/ncgl?wmsso_sign=check" target="_blank" rel="noopener noreferrer">Webshop da Wemade</a>, adicione os itens do seu pedido e gere o link do seu carrinho.</li>
                                <li>Envie no Discord o link do seu carrinho (começa com mycard...) e o comprovante de pagamento para prosseguirmos.</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="right-column">
            <div class="panel">
                <button class="invisible-button" onclick="copyForCardPayment(event)" title="Opção para pagamento com cartão"></button>
                <div class="panel-header">
                    <h2>💀 Resumo do Pedido 💀</h2>
                </div>
                <div class="result-group">
                    <div class="result-item">
                        <div class="result-label">Total Packs Top Up:</div>
                        <div class="result-value" id="summaryTopUpDisplay">R$0.00</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">Total TWD:</div>
                        <div class="result-value" id="summaryTwdDisplay">R$0.00</div>
                    </div>
                    <hr style="border-color: var(--panel-border); margin: 8px 0;">
                    <div class="total-grand">
                        Total Geral
                        <span id="summaryTotalDisplay">R$0.00</span>
                    </div>
                </div>
                <button class="btn" onclick="copySmartClipboard(event)">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                  Copiar Resumo
                </button>
                <div class="payment-methods">
                    <h3>Formas de Pagamento</h3>
                    <div class="payment-method">
                        <div class="payment-method-title"><span>Pix</span></div>
                        <div class="payment-details">
                            <p><strong>CELULAR:</strong> <span>14988231270</span></p>
                            <p><strong>Nome:</strong> <span>DAOSHI TRADE</span></p>
                        </div>
                    </div>
                    <div class="payment-method">
                        <div class="payment-method-title"><span>Binance</span></div>
                        <div class="payment-details"><p><strong>Email:</strong> <span>daoshicashstore@gmail.com</span></p></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>

  <div class="tooltip" id="tooltip"></div>
  <img src="https://media.giphy.com/media/bzawYMvJVw0KPA0u7M/giphy.gif" alt="Gothic Theme" class="gothic-gif">
  <audio id="backgroundMusic" src="https://github.com/maykbrito/devlinks/raw/main/assets/music.mp3" loop></audio>
  <div class="sound-control" id="soundControl">
    <svg class="sound-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M11 5L6 9H2v6h4l5 4V5z" fill="currentColor"/><path class="wave" d="M15.54 8.46a5 5 0 0 1 0 7.07" stroke="currentColor" fill="none"/><path class="wave" d="M19.07 4.93a10 10 0 0 1 0 14.14" stroke="currentColor" fill="none"/><line class="line" x1="23" y1="1" x2="1" y2="23" stroke="currentColor" stroke-width="2" style="opacity: 0;"/></svg>
  </div>
  <div class="volume-slider" id="volumeSlider"><span class="volume-label">Volume:</span><input type="range" min="0" max="100" value="70" id="volumeRange"></div>

<script>
    // Carrega configuração do arquivo externo config-precos.js
    const CONFIG = window.NIGHTCROWS_CONFIG || {
        defaultExchangeRate: 5.45,
        cardFeePercentage: 0.06,
        twdPackages: {
            500:   { price: 13.70 }, 800:   { price: 21.92 }, 1000:  { price: 27.40 },
            1200:  { price: 32.88 }, 3000:  { price: 82.20 }, 3500:  { price: 95.90 },
            5000:  { price: 137.00}, 7000:  { price: 191.80}, 10000: { price: 274.00},
            30000: { price: 822.00}
        },
        topUpPackages: {
            5: { price: 4.00 }, 8: { price: 6.40 }, 10: { price: 8.00 },
            20: { price: 16.00 }, 30: { price: 24.00 }, 50: { price: 40.00 },
            100: { price: 80.00 }
        }
    };

    let audioContext, masterGainNode, backgroundMusic;
    let isMuted = true;
    let audioInitialized = false;
    let exchangeRate = CONFIG.defaultExchangeRate;
    let twdQuantities = {};
    let topUpQuantities = {};

    window.onload = function() {
      buildTwdPacks();
      initializeQuantities();
      updateAllCalculations();
      setupEventListeners();
      atualizarCotacaoDolar();
      document.getElementById("soundControl").classList.add("muted");
    };
    
    function showTab(tabName) {
        document.querySelectorAll('.tab-pane').forEach(tab => tab.classList.remove('active'));
        document.getElementById(tabName + 'Tab').classList.add('active');
        document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
        document.querySelector(`.tab-button[onclick="showTab('${tabName}')"]`).classList.add('active');
        playSound('click');
    }

    function buildTwdPacks() {
        const container = document.getElementById('twd-pack-section');
        for (const [amount, details] of Object.entries(CONFIG.twdPackages)) {
            const group = document.createElement('div');
            group.className = 'form-group';
            
            const label = document.createElement('label');
            label.htmlFor = `twd-${amount}`;
            label.textContent = `${amount} TWD ($${details.price.toFixed(2)})`;
            
            const input = document.createElement('input');
            input.type = 'number';
            input.id = `twd-${amount}`;
            input.value = 0;
            input.oninput = () => updateTwdQuantity(amount, input.value);
            
            group.appendChild(label);
            group.appendChild(input);
            container.appendChild(group);
        }
    }
    
    function initializeQuantities() {
        Object.keys(CONFIG.twdPackages).forEach(amount => twdQuantities[amount] = 0);
        Object.keys(CONFIG.topUpPackages).forEach(amount => topUpQuantities[amount] = 0);
    }

    function updateTwdQuantity(amount, quantity) {
        twdQuantities[amount] = parseInt(quantity) || 0;
        updateAllCalculations();
        playSound('type');
    }
    function updateTopUpQuantity(amount, quantity) {
        topUpQuantities[amount] = parseInt(quantity) || 0;
        updateAllCalculations();
        playSound('type');
    }
    
    function initAudio() {
        if (audioInitialized) return;
        try {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            masterGainNode = audioContext.createGain();
            masterGainNode.gain.value = 0.7;
            masterGainNode.connect(audioContext.destination);
            backgroundMusic = document.getElementById("backgroundMusic");
            backgroundMusic.volume = 0.35;
            audioInitialized = true;
            toggleMute();
        } catch (e) { console.error("AudioContext não pôde ser iniciado.", e); }
    }
    function playSound(name) {
        if (!audioInitialized || isMuted) return;
        const noteMap = { click: 800, hover: 600, success: 1200, type: 440 + Math.random() * 100 };
        const gainMap = { click: 0.1, hover: 0.05, success: 0.2, type: 0.03 };
        const duration = name === "success" ? 0.3 : 0.1;
        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();
        oscillator.type = name === "click" ? "triangle" : "sine";
        oscillator.frequency.value = noteMap[name];
        gainNode.gain.value = gainMap[name];
        oscillator.connect(gainNode).connect(masterGainNode);
        oscillator.start();
        gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + duration);
        oscillator.stop(audioContext.currentTime + duration);
    }
    function toggleMute() {
        if (!audioInitialized) initAudio();
        isMuted = !isMuted;
        document.getElementById("soundControl").classList.toggle("muted", isMuted);
        if (backgroundMusic) {
            isMuted ? backgroundMusic.pause() : backgroundMusic.play().catch(e => {});
        }
        playSound('click');
    }
    function setupEventListeners() {
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener("keydown", () => playSound("type"));
            if (input.type === 'number') {
                input.addEventListener('focus', () => { if (input.value === '0') input.value = ''; });
                input.addEventListener('blur', () => { if (input.value === '') input.value = '0'; });
            }
        });
        document.querySelectorAll("button").forEach(el => {
            el.addEventListener("click", () => playSound("click"));
            el.addEventListener("mouseenter", () => playSound("hover"));
        });
        const soundControl = document.getElementById("soundControl");
        const volumeSlider = document.getElementById("volumeSlider");
        soundControl.addEventListener("click", toggleMute);
        soundControl.addEventListener("mouseenter", () => volumeSlider.classList.add("active"));
        volumeSlider.addEventListener("mouseleave", () => volumeSlider.classList.remove("active"));
        document.getElementById("volumeRange").addEventListener("input", function() {
            if (audioInitialized) {
                const vol = this.value / 100;
                masterGainNode.gain.value = vol;
                if(backgroundMusic) backgroundMusic.volume = vol * 0.5;
            }
        });
    }
    function showTooltip(message, event) {
        const tooltip = document.getElementById("tooltip");
        tooltip.textContent = message;
        const rect = event.target.getBoundingClientRect();
        tooltip.style.left = `${rect.left + rect.width / 2 - tooltip.offsetWidth / 2}px`;
        tooltip.style.top = `${rect.top - tooltip.offsetHeight - 10}px`;
        tooltip.style.opacity = "1";
        setTimeout(() => { tooltip.style.opacity = "0"; }, 2000);
    }

    function updateAllCalculations() {
        let totalTwdD = 0;
        for (const [amount, quantity] of Object.entries(twdQuantities)) {
            totalTwdD += quantity * CONFIG.twdPackages[amount].price;
        }

        let totalTopUpD = 0;
        for (const [amount, quantity] of Object.entries(topUpQuantities)) {
            totalTopUpD += quantity * CONFIG.topUpPackages[amount].price;
        }
        
        const totalTwdR = totalTwdD * exchangeRate;
        const totalTopUpR = totalTopUpD * exchangeRate;
        const totalGeralR = totalTwdR + totalTopUpR;
        const totalGeralD = totalTwdD + totalTopUpD;

        updateSummary(totalTwdR, totalTwdD, totalTopUpR, totalTopUpD, totalGeralR, totalGeralD);
    }

    function updateSummary(twdR, twdD, topUpR, topUpD, geralR, geralD) {
        document.getElementById("summaryTwdDisplay").innerHTML = `R$${twdR.toFixed(2)} <small>/ $${twdD.toFixed(2)}</small>`;
        document.getElementById("summaryTopUpDisplay").innerHTML = `R$${topUpR.toFixed(2)} <small>/ $${topUpD.toFixed(2)}</small>`;
        document.getElementById("summaryTotalDisplay").innerHTML = `R$${geralR.toFixed(2)} <small>/ $${geralD.toFixed(2)}</small>`;
    }
    
    async function atualizarCotacaoDolar() {
      try {
        const response = await fetch('https://api.binance.com/api/v3/ticker/price?symbol=USDTBRL');
        if (!response.ok) throw new Error('API Falhou');
        const data = await response.json();
        exchangeRate = parseFloat(data.price);
      } catch (error) {
        console.error('Erro ao buscar cotação, usando valor padrão:', error);
        exchangeRate = CONFIG.defaultExchangeRate;
      } finally {
        document.getElementById('cotacao').innerHTML = `Cotação USDT/BRL: <span class="value">R$${exchangeRate.toFixed(2)}</span>`;
        updateAllCalculations();
      }
    }
    
    function getFormValues() {
        let data = {
            hasTwd: false, twdText: '', totalTwdD: 0,
            hasTopUp: false, topUpText: '', totalTopUpD: 0,
            login: document.getElementById('login').value,
            password: document.getElementById('password').value,
            nickname: document.getElementById('nickname').value,
            server: document.getElementById('server').value,
        };

        for (const [amount, quantity] of Object.entries(twdQuantities)) {
            if (quantity > 0) {
                data.hasTwd = true;
                data.totalTwdD += quantity * CONFIG.twdPackages[amount].price;
                data.twdText += `  - Pack de ${amount} TWD: ${quantity} un.\n`;
            }
        }
        
        for (const [amount, quantity] of Object.entries(topUpQuantities)) {
            if (quantity > 0) {
                data.hasTopUp = true;
                data.totalTopUpD += quantity * CONFIG.topUpPackages[amount].price;
                data.topUpText += `  - Pack de $${amount}: ${quantity} un.\n`;
            }
        }
        
        data.totalTwdR = data.totalTwdD * exchangeRate;
        data.totalTopUpR = data.totalTopUpD * exchangeRate;
        data.totalGeralD = data.totalTwdD + data.totalTopUpD;
        data.totalGeralR = data.totalGeralD * exchangeRate;

        return data;
    }

    function copySmartClipboard(event) {
        const data = getFormValues();
        if (!data.hasTwd && !data.hasTopUp) {
            showTooltip("Selecione pelo menos um pacote!", event);
            return;
        }
        
        let texto = "⭐ RESUMO DO PEDIDO DAOSHI ⭐\n---------------------------------\n";
        
        if (data.hasTwd) {
            texto += `💎 PACOTES TWD\n${data.twdText}`;
            texto += `Subtotal TWD: R$${data.totalTwdR.toFixed(2)} / $${data.totalTwdD.toFixed(2)}\n---------------------------------\n`;
        }
        if (data.hasTopUp) {
            texto += `🎮 PACOTES TOP UP\n${data.topUpText}`;
            texto += `Subtotal Top Up: R$${data.totalTopUpR.toFixed(2)} / $${data.totalTopUpD.toFixed(2)}\n---------------------------------\n`;
            if (data.login || data.password || data.nickname || data.server) {
                texto += `👤 DADOS DA CONTA\n`;
                if (data.login) texto += `  - Login: ${data.login}\n`;
                if (data.password) texto += `  - Senha: ${data.password}\n`;
                if (data.nickname) texto += `  - Nick: ${data.nickname}\n`;
                if (data.server) texto += `  - Servidor: ${data.server}\n`;
                texto += `---------------------------------\n`;
            }
        }
        
        texto += `💰 TOTAL GERAL: R$${data.totalGeralR.toFixed(2)} / $${data.totalGeralD.toFixed(2)}\n\n`;
        texto += "🌸 INFORMAÇÕES DE PAGAMENTO 🌸\n";
        texto += `PIX (Celular): 14988231270\n`;
        texto += `Nome: DAOSHI TRADE\n\n`;
        texto += `Binance (Email): estrela203@hotmail.com\n`;
        
        navigator.clipboard.writeText(texto).then(() => {
            showTooltip("Resumo copiado!", event);
            playSound("success");
        });
    }

    function copyForCardPayment(event) {
        const data = getFormValues();
        if (!data.hasTwd && !data.hasTopUp) {
            showTooltip("Selecione um pacote para pagar com cartão!", event);
            return;
        }
        
        const totalComTaxa = data.totalGeralR * (1 + CONFIG.cardFeePercentage);
        
        let texto = "⭐ Pedido para Pagamento no Cartão ⭐\n---------------------------------\n";
        if (data.hasTopUp) texto += `- Itens: Pacotes Top Up\n`;
        if (data.hasTwd) texto += `- Itens: Pacotes TWD\n`;
        
        texto += `Valor do Pedido: R$${data.totalGeralR.toFixed(2)} / $${data.totalGeralD.toFixed(2)}\n`;
        texto += `Taxa do Cartão (${(CONFIG.cardFeePercentage * 100).toFixed(0)}%): R$${(totalComTaxa - data.totalGeralR).toFixed(2)}\n`;
        texto += `TOTAL A PAGAR: R$${totalComTaxa.toFixed(2)}\n\n`;
        texto += "Link de Pagamento (Mercado Pago):\nhttps://link.mercadopago.com.br/daoshicashstore";
        
        texto += "\n\n⚠️ INFORMAÇÕES IMPORTANTES ⚠️\n---------------------------------\n";
        texto += "💳 Pagamentos no Cartão de Crédito\n\n";
        texto += "• O cartão deve ser, obrigatoriamente, do próprio comprador.\n";
        texto += `• Pagamentos têm acréscimo de ${(CONFIG.cardFeePercentage * 100).toFixed(0)}% de juros.\n\n`;
        texto += "🔒 Para segurança da transação, é necessário informar:\n";
        texto += "  - Nome completo:\n  - CPF:\n  - Telefone (WhatsApp):\n  - Rede social ativa:\n\n";
        texto += "❗️Atenção: Em casos de suspeita de fraude ou tentativa de golpe, temos processos internos e legais para identificar e responsabilizar o comprador.";
        
        navigator.clipboard.writeText(texto).then(() => {
            showTooltip("Informações para cartão copiadas!", event);
            playSound("success");
        });
    }
</script>
</body>
</html>
